(function(n){n.fn.appear=function(t,i){var r=n.extend({data:undefined,one:!0,accX:0,accY:0},i);return this.each(function(){var i=n(this);if(i.appeared=!1,!t){i.trigger("appear",r.data);return}var u=n(window),f=function(){if(!i.is(":visible")){i.appeared=!1;return}var n=u.scrollLeft(),t=u.scrollTop(),f=i.offset(),e=f.left,o=f.top,s=r.accX,h=r.accY,c=i.height(),l=u.height(),a=i.width(),v=u.width();o+c+h>=t&&o<=t+l+h&&e+a+s>=n&&e<=n+v+s?i.appeared||i.trigger("appear",r.data):i.appeared=!1},e=function(){if(i.appeared=!0,r.one){u.unbind("scroll",f);var e=n.inArray(f,n.fn.appear.checks);e>=0&&n.fn.appear.checks.splice(e,1)}t.apply(this,arguments)};if(r.one)i.one("appear",r.data,e);else i.bind("appear",r.data,e);u.scroll(f);n.fn.appear.checks.push(f);f()})};n.extend(n.fn.appear,{checks:[],timeout:null,checkAll:function(){var t=n.fn.appear.checks.length;if(t>0)while(t--)n.fn.appear.checks[t]()},run:function(){n.fn.appear.timeout&&clearTimeout(n.fn.appear.timeout);n.fn.appear.timeout=setTimeout(n.fn.appear.checkAll,20)}});n.each(["append","prepend","after","before","attr","removeAttr","addClass","removeClass","toggleClass","remove","css","show","hide"],function(t,i){var r=n.fn[i];r&&(n.fn[i]=function(){var t=r.apply(this,arguments);return n.fn.appear.run(),t})})})(jQuery);