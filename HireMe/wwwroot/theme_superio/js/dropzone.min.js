"use strict";function _typeof(n){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(n)}function _possibleConstructorReturn(n,t){return t&&(_typeof(t)==="object"||typeof t=="function")?t:_assertThisInitialized(n)}function _getPrototypeOf(n){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf(n)}function _assertThisInitialized(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}});t&&_setPrototypeOf(n,t)}function _setPrototypeOf(n,t){return _setPrototypeOf=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},_setPrototypeOf(n,t)}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _defineProperties(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function _createClass(n,t,i){return t&&_defineProperties(n.prototype,t),i&&_defineProperties(n,i),n}function __guard__(n,t){return typeof n!="undefined"&&n!==null?t(n):undefined}function __guardMethod__(n,t,i){return typeof n!="undefined"&&n!==null&&typeof n[t]=="function"?i(n,t):undefined}var Emitter=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"on",value:function(n,t){return this._callbacks=this._callbacks||{},this._callbacks[n]||(this._callbacks[n]=[]),this._callbacks[n].push(t),this}},{key:"emit",value:function(n){var r,i,h,c;if(this._callbacks=this._callbacks||{},r=this._callbacks[n],r){for(var u=arguments.length,e=new Array(u>1?u-1:0),t=1;t<u;t++)e[t-1]=arguments[t];var f=!0,o=!1,s=undefined;try{for(i=r[Symbol.iterator]();!(f=(h=i.next()).done);f=!0)c=h.value,c.apply(this,e)}catch(l){o=!0;s=l}finally{try{f||i["return"]==null||i["return"]()}finally{if(o)throw s;}}}return this}},{key:"off",value:function(n,t){var i,r,u;if(!this._callbacks||arguments.length===0)return this._callbacks={},this;if(i=this._callbacks[n],!i)return this;if(arguments.length===1)return delete this._callbacks[n],this;for(r=0;r<i.length;r++)if(u=i[r],u===t){i.splice(r,1);break}return this}}]),n}(),Dropzone=function(n){function t(n,i){var r,u,f,e;if(_classCallCheck(this,t),r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)),r.element=n,r.version=t.version,r.defaultOptions.previewTemplate=r.defaultOptions.previewTemplate.replace(/\n*/g,""),r.clickableElements=[],r.listeners=[],r.files=[],typeof r.element=="string"&&(r.element=document.querySelector(r.element)),!r.element||r.element.nodeType==null)throw new Error("Invalid dropzone element.");if(r.element.dropzone)throw new Error("Dropzone already attached.");if(t.instances.push(_assertThisInitialized(r)),r.element.dropzone=_assertThisInitialized(r),e=(f=t.optionsForElement(r.element))!=null?f:{},r.options=t.extend({},r.defaultOptions,e,i!=null?i:{}),r.options.forceFallback||!t.isBrowserSupported())return _possibleConstructorReturn(r,r.options.fallback.call(_assertThisInitialized(r)));if(r.options.url==null&&(r.options.url=r.element.getAttribute("action")),!r.options.url)throw new Error("No URL provided.");if(r.options.acceptedFiles&&r.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(r.options.uploadMultiple&&r.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return r.options.acceptedMimeTypes&&(r.options.acceptedFiles=r.options.acceptedMimeTypes,delete r.options.acceptedMimeTypes),r.options.renameFilename!=null&&(r.options.renameFile=function(n){return r.options.renameFilename.call(_assertThisInitialized(r),n.name,n)}),r.options.method=r.options.method.toUpperCase(),(u=r.getExistingFallback())&&u.parentNode&&u.parentNode.removeChild(u),r.options.previewsContainer!==!1&&(r.previewsContainer=r.options.previewsContainer?t.getElement(r.options.previewsContainer,"previewsContainer"):r.element),r.options.clickable&&(r.clickableElements=r.options.clickable===!0?[r.element]:t.getElements(r.options.clickable,"clickable")),r.init(),r}return _inherits(t,n),_createClass(t,null,[{key:"initClass",value:function(){this.prototype.Emitter=Emitter;this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"];this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(n,t,i){if(i)return{dzuuid:i.file.upload.uuid,dzchunkindex:i.index,dztotalfilesize:i.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:i.file.upload.totalChunkCount,dzchunkbyteoffset:i.index*this.options.chunkSize}},accept:function(n,t){return t()},chunksUploaded:function(n,t){t()},fallback:function(){var i,r,s,u,n;this.element.className="".concat(this.element.className," dz-browser-not-supported");var f=!0,e=!1,o=undefined;try{for(r=this.element.getElementsByTagName("div")[Symbol.iterator]();!(f=(s=r.next()).done);f=!0)if(u=s.value,/(^| )dz-message($| )/.test(u.className)){i=u;u.className="dz-message";break}}catch(h){e=!0;o=h}finally{try{f||r["return"]==null||r["return"]()}finally{if(e)throw o;}}return i||(i=t.createElement('<div class="dz-message"><span><\/span><\/div>'),this.element.appendChild(i)),n=i.getElementsByTagName("span")[0],n&&(n.textContent!=null?n.textContent=this.options.dictFallbackMessage:n.innerText!=null&&(n.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(n,t,i,r){var u={srcX:0,srcY:0,srcWidth:n.width,srcHeight:n.height},f=n.width/n.height,e;if(t==null&&i==null?(t=u.srcWidth,i=u.srcHeight):t==null?t=i*f:i==null&&(i=t/f),t=Math.min(t,u.srcWidth),i=Math.min(i,u.srcHeight),e=t/i,u.srcWidth>t||u.srcHeight>i)if(r==="crop")f>e?(u.srcHeight=n.height,u.srcWidth=u.srcHeight*e):(u.srcWidth=n.width,u.srcHeight=u.srcWidth/e);else if(r==="contain")f>e?i=t/f:t=i*f;else throw new Error("Unknown resizeMethod '".concat(r,"'"));return u.srcX=(n.width-u.srcWidth)/2,u.srcY=(n.height-u.srcHeight)/2,u.trgWidth=t,u.trgHeight=i,u},transformFile:function(n,t){return(this.options.resizeWidth||this.options.resizeHeight)&&n.type.match(/image.*/)?this.resizeImage(n,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(n)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /><\/div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size><\/span><\/div>\n    <div class="dz-filename"><span data-dz-name><\/span><\/div>\n  <\/div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress><\/span><\/div>\n  <div class="dz-error-message"><span data-dz-errormessage><\/span><\/div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Check<\/title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"><\/path>\n      <\/g>\n    <\/svg>\n  <\/div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Error<\/title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"><\/path>\n        <\/g>\n      <\/g>\n    <\/svg>\n  <\/div>\n<\/div>',drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:function(){},dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:function(){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(n){var i=this,r,v,u,f,w,e,d,g;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){n.previewElement=t.createElement(this.options.previewTemplate.trim());n.previewTemplate=n.previewElement;this.previewsContainer.appendChild(n.previewElement);var o=!0,l=!1,a=undefined;try{for(r=n.previewElement.querySelectorAll("[data-dz-name]")[Symbol.iterator]();!(o=(v=r.next()).done);o=!0)u=v.value,u.textContent=n.name}catch(s){l=!0;a=s}finally{try{o||r["return"]==null||r["return"]()}finally{if(l)throw a;}}var h=!0,y=!1,p=undefined;try{for(f=n.previewElement.querySelectorAll("[data-dz-size]")[Symbol.iterator]();!(h=(w=f.next()).done);h=!0)u=w.value,u.innerHTML=this.filesize(n.size)}catch(s){y=!0;p=s}finally{try{h||f["return"]==null||f["return"]()}finally{if(y)throw p;}}this.options.addRemoveLinks&&(n._removeLink=t.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"<\/a>")),n.previewElement.appendChild(n._removeLink));var nt=function(r){return r.preventDefault(),r.stopPropagation(),n.status===t.UPLOADING?t.confirm(i.options.dictCancelUploadConfirmation,function(){return i.removeFile(n)}):i.options.dictRemoveFileConfirmation?t.confirm(i.options.dictRemoveFileConfirmation,function(){return i.removeFile(n)}):i.removeFile(n)},c=!0,b=!1,k=undefined;try{for(e=n.previewElement.querySelectorAll("[data-dz-remove]")[Symbol.iterator]();!(c=(d=e.next()).done);c=!0)g=d.value,g.addEventListener("click",nt)}catch(s){b=!0;k=s}finally{try{c||e["return"]==null||e["return"]()}finally{if(b)throw k;}}}},removedfile:function(n){return n.previewElement!=null&&n.previewElement.parentNode!=null&&n.previewElement.parentNode.removeChild(n.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(n,t){var i,o,u;if(n.previewElement){n.previewElement.classList.remove("dz-file-preview");var r=!0,f=!1,e=undefined;try{for(i=n.previewElement.querySelectorAll("[data-dz-thumbnail]")[Symbol.iterator]();!(r=(o=i.next()).done);r=!0)u=o.value,u.alt=n.name,u.src=t}catch(s){f=!0;e=s}finally{try{r||i["return"]==null||i["return"]()}finally{if(f)throw e;}}return setTimeout(function(){return n.previewElement.classList.add("dz-image-preview")},1)}},error:function(n,t){var i,e,o;if(n.previewElement){n.previewElement.classList.add("dz-error");typeof t!="String"&&t.error&&(t=t.error);var r=!0,u=!1,f=undefined;try{for(i=n.previewElement.querySelectorAll("[data-dz-errormessage]")[Symbol.iterator]();!(r=(e=i.next()).done);r=!0)o=e.value,o.textContent=t}catch(s){u=!0;f=s}finally{try{r||i["return"]==null||i["return"]()}finally{if(u)throw f;}}}},errormultiple:function(){},processing:function(n){if(n.previewElement&&(n.previewElement.classList.add("dz-processing"),n._removeLink))return n._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(n,t){var i,o,r;if(n.previewElement){var u=!0,f=!1,e=undefined;try{for(i=n.previewElement.querySelectorAll("[data-dz-uploadprogress]")[Symbol.iterator]();!(u=(o=i.next()).done);u=!0)r=o.value,r.nodeName==="PROGRESS"?r.value=t:r.style.width="".concat(t,"%")}catch(s){f=!0;e=s}finally{try{u||i["return"]==null||i["return"]()}finally{if(f)throw e;}}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(n){if(n.previewElement)return n.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(n){return this.emit("error",n,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(n){return n._removeLink&&(n._removeLink.innerHTML=this.options.dictRemoveFile),n.previewElement?n.previewElement.classList.add("dz-complete"):void 0},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}};this.prototype._thumbnailQueue=[];this.prototype._processingThumbnail=!1}},{key:"extend",value:function(n){for(var i,u,f,e,s,r=arguments.length,o=new Array(r>1?r-1:0),t=1;t<r;t++)o[t-1]=arguments[t];for(i=0,u=o;i<u.length;i++){f=u[i];for(e in f)s=f[e],n[e]=s}return n}}]),_createClass(t,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(n){return n.accepted}).map(function(n){return n})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(n){return!n.accepted}).map(function(n){return n})}},{key:"getFilesWithStatus",value:function(n){return this.files.filter(function(t){return t.status===n}).map(function(n){return n})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(t.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(t.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(t.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(n){return n.status===t.UPLOADING||n.status===t.QUEUED}).map(function(n){return n})}},{key:"init",value:function(){var n=this,u,i,h,e,c,r;this.element.tagName==="form"&&this.element.setAttribute("enctype","multipart/form-data");this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(t.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"<\/button><\/div>")));this.clickableElements.length&&(u=function u(){return n.hiddenFileInput&&n.hiddenFileInput.parentNode.removeChild(n.hiddenFileInput),n.hiddenFileInput=document.createElement("input"),n.hiddenFileInput.setAttribute("type","file"),(n.options.maxFiles===null||n.options.maxFiles>1)&&n.hiddenFileInput.setAttribute("multiple","multiple"),n.hiddenFileInput.className="dz-hidden-input",n.options.acceptedFiles!==null&&n.hiddenFileInput.setAttribute("accept",n.options.acceptedFiles),n.options.capture!==null&&n.hiddenFileInput.setAttribute("capture",n.options.capture),n.hiddenFileInput.style.visibility="hidden",n.hiddenFileInput.style.position="absolute",n.hiddenFileInput.style.top="0",n.hiddenFileInput.style.left="0",n.hiddenFileInput.style.height="0",n.hiddenFileInput.style.width="0",t.getElement(n.options.hiddenInputContainer,"hiddenInputContainer").appendChild(n.hiddenFileInput),n.hiddenFileInput.addEventListener("change",function(){var i=n.hiddenFileInput.files,t,o,s;if(i.length){var r=!0,f=!1,e=undefined;try{for(t=i[Symbol.iterator]();!(r=(o=t.next()).done);r=!0)s=o.value,n.addFile(s)}catch(h){f=!0;e=h}finally{try{r||t["return"]==null||t["return"]()}finally{if(f)throw e;}}}return n.emit("addedfiles",i),u()})},u());this.URL=window.URL!==null?window.URL:window.webkitURL;var f=!0,o=!1,s=undefined;try{for(i=this.events[Symbol.iterator]();!(f=(h=i.next()).done);f=!0){e=h.value;this.on(e,this.options[e])}}catch(l){o=!0;s=l}finally{try{f||i["return"]==null||i["return"]()}finally{if(o)throw s;}}this.on("uploadprogress",function(){return n.updateTotalUploadProgress()});this.on("removedfile",function(){return n.updateTotalUploadProgress()});this.on("canceled",function(t){return n.emit("complete",t)});this.on("complete",function(){if(n.getAddedFiles().length===0&&n.getUploadingFiles().length===0&&n.getQueuedFiles().length===0)return setTimeout(function(){return n.emit("queuecomplete")},0)});return c=function(n){return n.dataTransfer.types&&n.dataTransfer.types.some(function(n){return n=="Files"})},r=function(n){if(c(n))return n.stopPropagation(),n.preventDefault?n.preventDefault():n.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(t){return n.emit("dragstart",t)},dragenter:function(t){return r(t),n.emit("dragenter",t)},dragover:function(t){var i;try{i=t.dataTransfer.effectAllowed}catch(u){}return t.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",r(t),n.emit("dragover",t)},dragleave:function(t){return n.emit("dragleave",t)},drop:function(t){return r(t),n.drop(t)},dragend:function(t){return n.emit("dragend",t)}}}],this.clickableElements.forEach(function(i){return n.listeners.push({element:i,events:{click:function(r){return(i!==n.element||r.target===n.element||t.elementInside(r.target,n.element.querySelector(".dz-message")))&&n.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(this.hiddenFileInput!=null?this.hiddenFileInput.parentNode:undefined)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,t.instances.splice(t.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var t,i=0,r=0,h=this.getActiveFiles(),n,s,f;if(h.length){var u=!0,e=!1,o=undefined;try{for(n=this.getActiveFiles()[Symbol.iterator]();!(u=(s=n.next()).done);u=!0)f=s.value,i+=f.upload.bytesSent,r+=f.upload.total}catch(c){e=!0;o=c}finally{try{u||n["return"]==null||n["return"]()}finally{if(e)throw o;}}t=100*i/r}else t=100;return this.emit("totaluploadprogress",t,r,i)}},{key:"_getParamName",value:function(n){return typeof this.options.paramName=="function"?this.options.paramName(n):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(n,"]"):"")}},{key:"_renameFile",value:function(n){return typeof this.options.renameFile!="function"?n.name:this.options.renameFile(n)}},{key:"getFallbackForm",value:function(){var u,n,i,r;return(u=this.getExistingFallback())?u:(i='<div class="dz-fallback">',this.options.dictFallbackText&&(i+="<p>".concat(this.options.dictFallbackText,"<\/p>")),i+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':undefined,' /><input type="submit" value="Upload!"><\/div>'),r=t.createElement(i),this.element.tagName!=="FORM"?(n=t.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"><\/form>')),n.appendChild(r)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),n!=null?n:r)}},{key:"getExistingFallback",value:function(){for(var i,r,u=function(n){var i=!0,u=!1,f=undefined,t,e,r;try{for(t=n[Symbol.iterator]();!(i=(e=t.next()).done);i=!0)if(r=e.value,/(^| )fallback($| )/.test(r.className))return r}catch(o){u=!0;f=o}finally{try{i||t["return"]==null||t["return"]()}finally{if(u)throw f;}}},n=0,t=["div","form"];n<t.length;n++)if(i=t[n],r=u(this.element.getElementsByTagName(i)))return r}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(n){return function(){var i=[],t,r;for(t in n.events)r=n.events[t],i.push(n.element.addEventListener(t,r,!1));return i}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(n){return function(){var i=[],t,r;for(t in n.events)r=n.events[t],i.push(n.element.removeEventListener(t,r,!1));return i}()})}},{key:"disable",value:function(){var n=this;return this.clickableElements.forEach(function(n){return n.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(t){return n.cancelUpload(t)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(n){return n.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(n){var i=0,u="b",r,t,f,e;if(n>0){for(r=["tb","gb","mb","kb","b"],t=0;t<r.length;t++)if(f=r[t],e=Math.pow(this.options.filesizeBase,4-t)/10,n>=e){i=n/Math.pow(this.options.filesizeBase,4-t);u=f;break}i=Math.round(10*i)/10}return"<strong>".concat(i,"<\/strong> ").concat(this.options.dictFileSizeUnits[u])}},{key:"_updateMaxFilesReachedClass",value:function(){return this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(n){var t,i,r;if(n.dataTransfer){for(this.emit("drop",n),t=[],i=0;i<n.dataTransfer.files.length;i++)t[i]=n.dataTransfer.files[i];t.length&&(r=n.dataTransfer.items,r&&r.length&&r[0].webkitGetAsEntry!=null?this._addFilesFromItems(r):this.handleFiles(t));this.emit("addedfiles",t)}}},{key:"paste",value:function(n){if(__guard__(n!=null?n.clipboardData:undefined,function(n){return n.items})!=null){this.emit("paste",n);var t=n.clipboardData.items;if(t.length)return this._addFilesFromItems(t)}}},{key:"handleFiles",value:function(n){var i=!0,r=!1,u=undefined,t,f,e;try{for(t=n[Symbol.iterator]();!(i=(f=t.next()).done);i=!0)e=f.value,this.addFile(e)}catch(o){r=!0;u=o}finally{try{i||t["return"]==null||t["return"]()}finally{if(r)throw u;}}}},{key:"_addFilesFromItems",value:function(n){var t=this;return function(){var r=[],e=!0,o=!1,s=undefined,f,h,i,u;try{for(f=n[Symbol.iterator]();!(e=(h=f.next()).done);e=!0)i=h.value,i.webkitGetAsEntry!=null&&(u=i.webkitGetAsEntry())?u.isFile?r.push(t.addFile(i.getAsFile())):u.isDirectory?r.push(t._addFilesFromDirectory(u,u.name)):r.push(undefined):i.getAsFile!=null?i.kind==null||i.kind==="file"?r.push(t.addFile(i.getAsFile())):r.push(undefined):r.push(undefined)}catch(c){o=!0;s=c}finally{try{e||f["return"]==null||f["return"]()}finally{if(o)throw s;}}return r}()}},{key:"_addFilesFromDirectory",value:function(n,t){var i=this,u=n.createReader(),f=function(n){return __guardMethod__(console,"log",function(t){return t.log(n)})},r=function r(){return u.readEntries(function(n){var f,h,u;if(n.length>0){var e=!0,o=!1,s=undefined;try{for(f=n[Symbol.iterator]();!(e=(h=f.next()).done);e=!0)u=h.value,u.isFile?u.file(function(n){if(!i.options.ignoreHiddenFiles||n.name.substring(0,1)!==".")return n.fullPath="".concat(t,"/").concat(n.name),i.addFile(n)}):u.isDirectory&&i._addFilesFromDirectory(u,"".concat(t,"/").concat(u.name))}catch(c){o=!0;s=c}finally{try{e||f["return"]==null||f["return"]()}finally{if(o)throw s;}}r()}return null},f)};return r()}},{key:"accept",value:function(n,i){this.options.maxFilesize&&n.size>this.options.maxFilesize*1048576?i(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(n.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):t.isValidFile(n,this.options.acceptedFiles)?this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(i(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",n)):this.options.accept.call(this,n,i):i(this.options.dictInvalidFileType)}},{key:"addFile",value:function(n){var i=this;n.upload={uuid:t.uuidv4(),progress:0,total:n.size,bytesSent:0,filename:this._renameFile(n)};this.files.push(n);n.status=t.ADDED;this.emit("addedfile",n);this._enqueueThumbnail(n);this.accept(n,function(t){t?(n.accepted=!1,i._errorProcessing([n],t)):(n.accepted=!0,i.options.autoQueue&&i.enqueueFile(n));i._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(n){var i=!0,r=!1,u=undefined,t,f,e;try{for(t=n[Symbol.iterator]();!(i=(f=t.next()).done);i=!0)e=f.value,this.enqueueFile(e)}catch(o){r=!0;u=o}finally{try{i||t["return"]==null||t["return"]()}finally{if(r)throw u;}}return null}},{key:"enqueueFile",value:function(n){var i=this;if(n.status===t.ADDED&&n.accepted===!0){if(n.status=t.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return i.processQueue()},0)}else throw new Error("This file can't be queued because it has already been processed or was rejected.");}},{key:"_enqueueThumbnail",value:function(n){var t=this;if(this.options.createImageThumbnails&&n.type.match(/image.*/)&&n.size<=this.options.maxThumbnailFilesize*1048576)return this._thumbnailQueue.push(n),setTimeout(function(){return t._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var n=this,t;if(!this._processingThumbnail&&this._thumbnailQueue.length!==0)return this._processingThumbnail=!0,t=this._thumbnailQueue.shift(),this.createThumbnail(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(i){return n.emit("thumbnail",t,i),n._processingThumbnail=!1,n._processThumbnailQueue()})}},{key:"removeFile",value:function(n){return n.status===t.UPLOADING&&this.cancelUpload(n),this.files=without(this.files,n),this.emit("removedfile",n),this.files.length===0?this.emit("reset"):void 0}},{key:"removeAllFiles",value:function(n){var i,o,u;n==null&&(n=!1);var r=!0,f=!1,e=undefined;try{for(i=this.files.slice()[Symbol.iterator]();!(r=(o=i.next()).done);r=!0)u=o.value,(u.status!==t.UPLOADING||n)&&this.removeFile(u)}catch(s){f=!0;e=s}finally{try{r||i["return"]==null||i["return"]()}finally{if(f)throw e;}}return null}},{key:"resizeImage",value:function(n,i,r,u,f){var e=this;return this.createThumbnail(n,i,r,u,!0,function(i,r){var u,o;return r==null?f(n):(u=e.options.resizeMimeType,u==null&&(u=n.type),o=r.toDataURL(u,e.options.resizeQuality),(u==="image/jpeg"||u==="image/jpg")&&(o=ExifRestore.restore(n.dataURL,o)),f(t.dataURItoBlob(o)))})}},{key:"createThumbnail",value:function(n,t,i,r,u,f){var o=this,e=new FileReader;e.onload=function(){if(n.dataURL=e.result,n.type==="image/svg+xml"){f!=null&&f(e.result);return}o.createThumbnailFromUrl(n,t,i,r,u,f)};e.readAsDataURL(n)}},{key:"displayExistingFile",value:function(n,t,i,r){var f=this,e=arguments.length>4&&arguments[4]!==undefined?arguments[4]:!0,u;this.emit("addedfile",n);this.emit("complete",n);e?(u=function(t){f.emit("thumbnail",n,t);i&&i()},n.dataURL=t,this.createThumbnailFromUrl(n,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.resizeMethod,this.options.fixOrientation,u,r)):(this.emit("thumbnail",n,t),i&&i())}},{key:"createThumbnailFromUrl",value:function(n,t,i,r,u,f,e){var s=this,o=document.createElement("img");return e&&(o.crossOrigin=e),o.onload=function(){var e=function(n){return n(1)};return typeof EXIF!="undefined"&&EXIF!==null&&u&&(e=function(n){return EXIF.getData(o,function(){return n(EXIF.getTag(this,"Orientation"))})}),e(function(u){var l;n.width=o.width;n.height=o.height;var e=s.options.resize.call(s,n,t,i,r),c=document.createElement("canvas"),h=c.getContext("2d");c.width=e.trgWidth;c.height=e.trgHeight;u>4&&(c.width=e.trgHeight,c.height=e.trgWidth);switch(u){case 2:h.translate(c.width,0);h.scale(-1,1);break;case 3:h.translate(c.width,c.height);h.rotate(Math.PI);break;case 4:h.translate(0,c.height);h.scale(1,-1);break;case 5:h.rotate(.5*Math.PI);h.scale(1,-1);break;case 6:h.rotate(.5*Math.PI);h.translate(0,-c.width);break;case 7:h.rotate(.5*Math.PI);h.translate(c.height,-c.width);h.scale(-1,1);break;case 8:h.rotate(-.5*Math.PI);h.translate(-c.height,0)}return drawImageIOSFix(h,o,e.srcX!=null?e.srcX:0,e.srcY!=null?e.srcY:0,e.srcWidth,e.srcHeight,e.trgX!=null?e.trgX:0,e.trgY!=null?e.trgY:0,e.trgWidth,e.trgHeight),l=c.toDataURL("image/png"),f!=null?f(l,c):void 0})},f!=null&&(o.onerror=f),o.src=n.dataURL}},{key:"processQueue",value:function(){var t=this.options.parallelUploads,i=this.getUploadingFiles().length,r=i,n;if(!(i>=t)&&(n=this.getQueuedFiles(),n.length>0)){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,t-i));while(r<t){if(!n.length)return;this.processFile(n.shift());r++}}}},{key:"processFile",value:function(n){return this.processFiles([n])}},{key:"processFiles",value:function(n){var u=!0,f=!1,e=undefined,i,o,r;try{for(i=n[Symbol.iterator]();!(u=(o=i.next()).done);u=!0)r=o.value,r.processing=!0,r.status=t.UPLOADING,this.emit("processing",r)}catch(s){f=!0;e=s}finally{try{u||i["return"]==null||i["return"]()}finally{if(f)throw e;}}return this.options.uploadMultiple&&this.emit("processingmultiple",n),this.uploadFiles(n)}},{key:"_getFilesWithXhr",value:function(n){return this.files.filter(function(t){return t.xhr===n}).map(function(n){return n})}},{key:"cancelUpload",value:function(n){var i,h,c,r,y,p;if(n.status===t.UPLOADING){var u=this._getFilesWithXhr(n.xhr),f=!0,o=!1,s=undefined;try{for(i=u[Symbol.iterator]();!(f=(h=i.next()).done);f=!0)c=h.value,c.status=t.CANCELED}catch(l){o=!0;s=l}finally{try{f||i["return"]==null||i["return"]()}finally{if(o)throw s;}}typeof n.xhr!="undefined"&&n.xhr.abort();var e=!0,a=!1,v=undefined;try{for(r=u[Symbol.iterator]();!(e=(y=r.next()).done);e=!0)p=y.value,this.emit("canceled",p)}catch(l){a=!0;v=l}finally{try{e||r["return"]==null||r["return"]()}finally{if(a)throw v;}}this.options.uploadMultiple&&this.emit("canceledmultiple",u)}else(n.status===t.ADDED||n.status===t.QUEUED)&&(n.status=t.CANCELED,this.emit("canceled",n),this.options.uploadMultiple&&this.emit("canceledmultiple",[n]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(n){if(typeof n=="function"){for(var i=arguments.length,r=new Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return n.apply(this,r)}return n}},{key:"uploadFile",value:function(n){return this.uploadFiles([n])}},{key:"uploadFiles",value:function(n){var i=this;this._transformFiles(n,function(r){var o,e,h,c,f;if(i.options.chunking&&(o=r[0],n[0].upload.chunked=i.options.chunking&&(i.options.forceChunking||o.size>i.options.chunkSize),n[0].upload.totalChunkCount=Math.ceil(o.size/i.options.chunkSize)),n[0].upload.chunked){var u=n[0],s=r[0],l=0;if(u.upload.chunks=[],e=function(){for(var r=0;u.upload.chunks[r]!==undefined;)r++;if(!(r>=u.upload.totalChunkCount)){l++;var f=r*i.options.chunkSize,e=Math.min(f+i.options.chunkSize,u.size),o={name:i._getParamName(0),data:s.webkitSlice?s.webkitSlice(f,e):s.slice(f,e),filename:u.upload.filename,chunkIndex:r};u.upload.chunks[r]={file:u,index:r,dataBlock:o,status:t.UPLOADING,progress:0,retries:0};i._uploadData(n,[o])}},u.upload.finishedChunkUpload=function(r){var o=!0,f;for(r.status=t.SUCCESS,r.dataBlock=null,r.xhr=null,f=0;f<u.upload.totalChunkCount;f++){if(u.upload.chunks[f]===undefined)return e();u.upload.chunks[f].status!==t.SUCCESS&&(o=!1)}o&&i.options.chunksUploaded(u,function(){i._finished(n,"",null)})},i.options.parallelChunkUploads)for(h=0;h<u.upload.totalChunkCount;h++)e();else e()}else{for(c=[],f=0;f<n.length;f++)c[f]={name:i._getParamName(f),data:r[f],filename:n[f].upload.filename};i._uploadData(n,c)}})}},{key:"_getChunk",value:function(n,t){for(var i=0;i<n.upload.totalChunkCount;i++)if(n.upload.chunks[i]!==undefined&&n.upload.chunks[i].xhr===t)return n.upload.chunks[i]}},{key:"_uploadData",value:function(n,i){var e=this,r=new XMLHttpRequest,a=!0,b=!1,k=undefined,o,d,g,tt,it,rt,s,v,y,u,f,p,ut,h,ot,st,c,l;try{for(o=n[Symbol.iterator]();!(a=(d=o.next()).done);a=!0)g=d.value,g.xhr=r}catch(nt){b=!0;k=nt}finally{try{a||o["return"]==null||o["return"]()}finally{if(b)throw k;}}n[0].upload.chunked&&(n[0].upload.chunks[i[0].chunkIndex].xhr=r);tt=this.resolveOption(this.options.method,n);it=this.resolveOption(this.options.url,n);r.open(tt,it,!0);r.timeout=this.resolveOption(this.options.timeout,n);r.withCredentials=!!this.options.withCredentials;r.onload=function(t){e._finishedUploading(n,r,t)};r.ontimeout=function(){e._handleUploadError(n,r,"Request timedout after ".concat(e.options.timeout," seconds"))};r.onerror=function(){e._handleUploadError(n,r)};rt=r.upload!=null?r.upload:r;rt.onprogress=function(t){return e._updateFilesUploadProgress(n,r,t)};s={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};this.options.headers&&t.extend(s,this.options.headers);for(v in s)y=s[v],y&&r.setRequestHeader(v,y);if(u=new FormData,this.options.params){f=this.options.params;typeof f=="function"&&(f=f.call(this,n,r,n[0].upload.chunked?this._getChunk(n[0],r):null));for(p in f)ut=f[p],u.append(p,ut)}var w=!0,ft=!1,et=undefined;try{for(h=n[Symbol.iterator]();!(w=(ot=h.next()).done);w=!0)st=ot.value,this.emit("sending",st,r,u)}catch(nt){ft=!0;et=nt}finally{try{w||h["return"]==null||h["return"]()}finally{if(ft)throw et;}}for(this.options.uploadMultiple&&this.emit("sendingmultiple",n,r,u),this._addFormElementData(u),c=0;c<i.length;c++)l=i[c],u.append(l.name,l.data,l.filename);this.submitRequest(r,u,n)}},{key:"_transformFiles",value:function(n,t){for(var r=this,u=[],f=0,e=function(i){r.options.transformFile.call(r,n[i],function(r){u[i]=r;++f===n.length&&t(u)})},i=0;i<n.length;i++)e(i)}},{key:"_addFormElementData",value:function(n){var r,l,f,y,s;if(this.element.tagName==="FORM"){var e=!0,h=!1,c=undefined;try{for(r=this.element.querySelectorAll("input, textarea, select, button")[Symbol.iterator]();!(e=(l=r.next()).done);e=!0){var t=l.value,u=t.getAttribute("name"),i=t.getAttribute("type");if(i&&(i=i.toLowerCase()),typeof u!="undefined"&&u!==null)if(t.tagName==="SELECT"&&t.hasAttribute("multiple")){var o=!0,a=!1,v=undefined;try{for(f=t.options[Symbol.iterator]();!(o=(y=f.next()).done);o=!0)s=y.value,s.selected&&n.append(u,s.value)}catch(p){a=!0;v=p}finally{try{o||f["return"]==null||f["return"]()}finally{if(a)throw v;}}}else(!i||i!=="checkbox"&&i!=="radio"||t.checked)&&n.append(u,t.value)}}catch(p){h=!0;c=p}finally{try{e||r["return"]==null||r["return"]()}finally{if(h)throw c;}}}}},{key:"_updateFilesUploadProgress",value:function(n,t,i){var e,r,o,at,u,s,it,h,l,ft,a,b,v,st,f,y,lt,g;if(typeof i!="undefined"){if(e=100*i.loaded/i.total,n[0].upload.chunked){for(r=n[0],o=this._getChunk(r,t),o.progress=e,o.total=i.total,o.bytesSent=i.loaded,at=0,r.upload.progress=0,r.upload.total=0,r.upload.bytesSent=0,u=0;u<r.upload.totalChunkCount;u++)r.upload.chunks[u]!==undefined&&r.upload.chunks[u].progress!==undefined&&(r.upload.progress+=r.upload.chunks[u].progress,r.upload.total+=r.upload.chunks[u].total,r.upload.bytesSent+=r.upload.chunks[u].bytesSent);r.upload.progress=r.upload.progress/r.upload.totalChunkCount}else{var p=!0,nt=!1,tt=undefined;try{for(s=n[Symbol.iterator]();!(p=(it=s.next()).done);p=!0)h=it.value,h.upload.progress=e,h.upload.total=i.total,h.upload.bytesSent=i.loaded}catch(c){nt=!0;tt=c}finally{try{p||s["return"]==null||s["return"]()}finally{if(nt)throw tt;}}}var w=!0,rt=!1,ut=undefined;try{for(l=n[Symbol.iterator]();!(w=(ft=l.next()).done);w=!0)a=ft.value,this.emit("uploadprogress",a,a.upload.progress,a.upload.bytesSent)}catch(c){rt=!0;ut=c}finally{try{w||l["return"]==null||l["return"]()}finally{if(rt)throw ut;}}}else{b=!0;e=100;var k=!0,et=!1,ot=undefined;try{for(v=n[Symbol.iterator]();!(k=(st=v.next()).done);k=!0)f=st.value,(f.upload.progress!==100||f.upload.bytesSent!==f.upload.total)&&(b=!1),f.upload.progress=e,f.upload.bytesSent=f.upload.total}catch(c){et=!0;ot=c}finally{try{k||v["return"]==null||v["return"]()}finally{if(et)throw ot;}}if(b)return;var d=!0,ht=!1,ct=undefined;try{for(y=n[Symbol.iterator]();!(d=(lt=y.next()).done);d=!0)g=lt.value,this.emit("uploadprogress",g,e,g.upload.bytesSent)}catch(c){ht=!0;ct=c}finally{try{d||y["return"]==null||y["return"]()}finally{if(ht)throw ct;}}}}},{key:"_finishedUploading",value:function(n,i,r){var u;if(n[0].status!==t.CANCELED&&i.readyState===4){if(i.responseType!=="arraybuffer"&&i.responseType!=="blob"&&(u=i.responseText,i.getResponseHeader("content-type")&&~i.getResponseHeader("content-type").indexOf("application/json")))try{u=JSON.parse(u)}catch(f){r=f;u="Invalid JSON response from server."}this._updateFilesUploadProgress(n);200<=i.status&&i.status<300?n[0].upload.chunked?n[0].upload.finishedChunkUpload(this._getChunk(n[0],i)):this._finished(n,u,r):this._handleUploadError(n,i,u)}}},{key:"_handleUploadError",value:function(n,i,r){if(n[0].status!==t.CANCELED){if(n[0].upload.chunked&&this.options.retryChunks){var u=this._getChunk(n[0],i);if(u.retries++<this.options.retryChunksLimit){this._uploadData(n,[u.dataBlock]);return}console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(n,r||this.options.dictResponseError.replace("{{statusCode}}",i.status),i)}}},{key:"submitRequest",value:function(n,t){n.send(t)}},{key:"_finished",value:function(n,i,r){var e=!0,o=!1,s=undefined,u,h,f;try{for(u=n[Symbol.iterator]();!(e=(h=u.next()).done);e=!0)f=h.value,f.status=t.SUCCESS,this.emit("success",f,i,r),this.emit("complete",f)}catch(c){o=!0;s=c}finally{try{e||u["return"]==null||u["return"]()}finally{if(o)throw s;}}return this.options.uploadMultiple&&(this.emit("successmultiple",n,i,r),this.emit("completemultiple",n)),this.options.autoProcessQueue?this.processQueue():void 0}},{key:"_errorProcessing",value:function(n,i,r){var e=!0,o=!1,s=undefined,u,h,f;try{for(u=n[Symbol.iterator]();!(e=(h=u.next()).done);e=!0)f=h.value,f.status=t.ERROR,this.emit("error",f,i,r),this.emit("complete",f)}catch(c){o=!0;s=c}finally{try{e||u["return"]==null||u["return"]()}finally{if(o)throw s;}}return this.options.uploadMultiple&&(this.emit("errormultiple",n,i,r),this.emit("completemultiple",n)),this.options.autoProcessQueue?this.processQueue():void 0}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n==="x"?t:t&3|8;return i.toString(16)})}}]),t}(Emitter),without,camelize,contentLoaded;Dropzone.initClass();Dropzone.version="5.7.0";Dropzone.options={};Dropzone.optionsForElement=function(n){return n.getAttribute("id")?Dropzone.options[camelize(n.getAttribute("id"))]:undefined};Dropzone.instances=[];Dropzone.forElement=function(n){if(typeof n=="string"&&(n=document.querySelector(n)),(n!=null?n.dropzone:undefined)==null)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return n.dropzone};Dropzone.autoDiscover=!0;Dropzone.discover=function(){var n,t;return document.querySelectorAll?n=document.querySelectorAll(".dropzone"):(n=[],t=function(t){return function(){var r=[],u=!0,e=!1,o=undefined,i,s,f;try{for(i=t[Symbol.iterator]();!(u=(s=i.next()).done);u=!0)f=s.value,/(^| )dropzone($| )/.test(f.className)?r.push(n.push(f)):r.push(undefined)}catch(h){e=!0;o=h}finally{try{u||i["return"]==null||i["return"]()}finally{if(e)throw o;}}return r}()},t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))),function(){var i=[],r=!0,f=!1,e=undefined,t,o,u;try{for(t=n[Symbol.iterator]();!(r=(o=t.next()).done);r=!0)u=o.value,Dropzone.optionsForElement(u)!==!1?i.push(new Dropzone(u)):i.push(undefined)}catch(s){f=!0;e=s}finally{try{r||t["return"]==null||t["return"]()}finally{if(f)throw e;}}return i}()};Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i];Dropzone.isBrowserSupported=function(){var n=!0,t,f,e;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){var i=!0,r=!1,u=undefined;try{for(t=Dropzone.blacklistedBrowsers[Symbol.iterator]();!(i=(f=t.next()).done);i=!0)if(e=f.value,e.test(navigator.userAgent)){n=!1;continue}}catch(o){r=!0;u=o}finally{try{i||t["return"]==null||t["return"]()}finally{if(r)throw u;}}}else n=!1;else n=!1;return n};Dropzone.dataURItoBlob=function(n){for(var i=atob(n.split(",")[1]),e=n.split(",")[0].split(":")[1].split(";")[0],u=new ArrayBuffer(i.length),o=new Uint8Array(u),t=0,r=i.length,f=0<=r;f?t<=r:t>=r;f?t++:t--)o[t]=i.charCodeAt(t);return new Blob([u],{type:e})};without=function(n,t){return n.filter(function(n){return n!==t}).map(function(n){return n})};camelize=function(n){return n.replace(/[\-_](\w)/g,function(n){return n.charAt(1).toUpperCase()})};Dropzone.createElement=function(n){var t=document.createElement("div");return t.innerHTML=n,t.childNodes[0]};Dropzone.elementInside=function(n,t){if(n===t)return!0;while(n=n.parentNode)if(n===t)return!0;return!1};Dropzone.getElement=function(n,t){var i;if(typeof n=="string"?i=document.querySelector(n):n.nodeType!=null&&(i=n),i==null)throw new Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector or a plain HTML element."));return i};Dropzone.getElements=function(n,t){var r,i,u,c,f,y;if(n instanceof Array){i=[];try{var e=!0,s=!1,h=undefined;try{for(u=n[Symbol.iterator]();!(e=(c=u.next()).done);e=!0)r=c.value,i.push(this.getElement(r,t))}catch(l){s=!0;h=l}finally{try{e||u["return"]==null||u["return"]()}finally{if(s)throw h;}}}catch(p){i=null}}else if(typeof n=="string"){i=[];var o=!0,a=!1,v=undefined;try{for(f=document.querySelectorAll(n)[Symbol.iterator]();!(o=(y=f.next()).done);o=!0)r=y.value,i.push(r)}catch(l){a=!0;v=l}finally{try{o||f["return"]==null||f["return"]()}finally{if(a)throw v;}}}else n.nodeType!=null&&(i=[n]);if(i==null||!i.length)throw new Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return i};Dropzone.confirm=function(n,t,i){return window.confirm(n)?t():i!=null?i():void 0};Dropzone.isValidFile=function(n,t){var r,s,i;if(!t)return!0;t=t.split(",");var f=n.type,h=f.replace(/\/.*$/,""),u=!0,e=!1,o=undefined;try{for(r=t[Symbol.iterator]();!(u=(s=r.next()).done);u=!0)if(i=s.value,i=i.trim(),i.charAt(0)==="."){if(n.name.toLowerCase().indexOf(i.toLowerCase(),n.name.length-i.length)!==-1)return!0}else if(/\/\*$/.test(i)){if(h===i.replace(/\/.*$/,""))return!0}else if(f===i)return!0}catch(c){e=!0;o=c}finally{try{u||r["return"]==null||r["return"]()}finally{if(e)throw o;}}return!1};typeof jQuery!="undefined"&&jQuery!==null&&(jQuery.fn.dropzone=function(n){return this.each(function(){return new Dropzone(this,n)})});typeof module!="undefined"&&module!==null?module.exports=Dropzone:window.Dropzone=Dropzone;Dropzone.ADDED="added";Dropzone.QUEUED="queued";Dropzone.ACCEPTED=Dropzone.QUEUED;Dropzone.UPLOADING="uploading";Dropzone.PROCESSING=Dropzone.UPLOADING;Dropzone.CANCELED="canceled";Dropzone.ERROR="error";Dropzone.SUCCESS="success";var detectVerticalSquash=function(n){var l=n.naturalWidth,i=n.naturalHeight,r=document.createElement("canvas"),u,s,e;r.width=1;r.height=i;u=r.getContext("2d");u.drawImage(n,0,0);for(var h=u.getImageData(1,0,1,i),c=h.data,f=0,o=i,t=i;t>f;)s=c[(t-1)*4+3],s===0?o=t:f=t,t=o+f>>1;return e=t/i,e===0?1:e},drawImageIOSFix=function(n,t,i,r,u,f,e,o,s,h){var c=detectVerticalSquash(t);return n.drawImage(t,i,r,u,f,e,o,s,h/c)},ExifRestore=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(n){for(var o="",u=undefined,t=undefined,i="",s=undefined,h=undefined,f=undefined,r="",e=0;;)if(u=n[e++],t=n[e++],i=n[e++],s=u>>2,h=(u&3)<<4|t>>4,f=(t&15)<<2|i>>6,r=i&63,isNaN(t)?f=r=64:isNaN(i)&&(r=64),o=o+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(h)+this.KEY_STR.charAt(f)+this.KEY_STR.charAt(r),u=t=i="",s=h=f=r="",!(e<n.length))break;return o}},{key:"restore",value:function(n,t){if(!n.match("data:image/jpeg;base64,"))return t;var i=this.decode64(n.replace("data:image/jpeg;base64,","")),r=this.slice2Segments(i),u=this.exifManipulation(t,r);return"data:image/jpeg;base64,".concat(this.encode64(u))}},{key:"exifManipulation",value:function(n,t){var i=this.getExifArray(t),r=this.insertExif(n,i);return new Uint8Array(r)}},{key:"getExifArray",value:function(n){for(var t=undefined,i=0;i<n.length;){if(t=n[i],t[0]===255&t[1]===225)return t;i++}return[]}},{key:"insertExif",value:function(n,t){var f=n.replace("data:image/jpeg;base64,",""),i=this.decode64(f),u=i.indexOf(255,3),e=i.slice(0,u),o=i.slice(u),r=e;return r=r.concat(t),r.concat(o)}},{key:"slice2Segments",value:function(n){for(var t=0,r=[],u,i,f;;){if(n[t]===255&n[t+1]===218)break;if(n[t]===255&n[t+1]===216?t+=2:(u=n[t+2]*256+n[t+3],i=t+u+2,f=n.slice(t,i),r.push(f),t=i),t>n.length)break}return r}},{key:"decode64",value:function(n){var e=undefined,o=undefined,s="",h=undefined,r=undefined,t=undefined,u="",i=0,f=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(n)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");;)if(h=this.KEY_STR.indexOf(n.charAt(i++)),r=this.KEY_STR.indexOf(n.charAt(i++)),t=this.KEY_STR.indexOf(n.charAt(i++)),u=this.KEY_STR.indexOf(n.charAt(i++)),e=h<<2|r>>4,o=(r&15)<<4|t>>2,s=(t&3)<<6|u,f.push(e),t!==64&&f.push(o),u!==64&&f.push(s),e=o=s="",h=r=t=u="",!(i<n.length))break;return f}}]),n}();ExifRestore.initClass();contentLoaded=function(n,t){var e=!1,o=!0,i=n.document,s=i.documentElement,f=i.addEventListener?"addEventListener":"attachEvent",c=i.addEventListener?"removeEventListener":"detachEvent",u=i.addEventListener?"":"on",r=function r(f){if(f.type!=="readystatechange"||i.readyState==="complete")return(f.type==="load"?n:i)[c](u+f.type,r,!1),!e&&(e=!0)?t.call(n,f.type||f):void 0},h=function h(){try{s.doScroll("left")}catch(n){setTimeout(h,50);return}return r("poll")};if(i.readyState!=="complete"){if(i.createEventObject&&s.doScroll){try{o=!n.frameElement}catch(l){}o&&h()}return i[f](u+"DOMContentLoaded",r,!1),i[f](u+"readystatechange",r,!1),n[f](u+"load",r,!1)}};Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover)return Dropzone.discover()};contentLoaded(window,Dropzone._autoDiscoverFunction);